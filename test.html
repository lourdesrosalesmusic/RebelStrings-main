<div class="container flex-grow-1" style="margin-top: 50px;">
  <div class="row" style="display: flex; justify-content: center;">
    <div class="col-10">
      <h1 id="heading1" class="text-center">Contact Form</h1>

      <p id="p1" class="" style="font-size: small;">
        Please, fill the following form with as much detail as you can provide. Any information given will be used to provide you with a better personalized answer, the more we know about you and your event, the better we can tailor our approach.
      </p>

      <div class="form-group">
        <h5 id="name-form" for="name">Name</h5>
        <input type="text" class="form-control" id="name" placeholder="" />
      </div>

      <div class="form-group">
        <h5 id="email-form" for="email">Email</h5>
        <input type="email" class="form-control" id="email" placeholder="" />
      </div>

      <div class="form-group">
        <h5 id="dropdown-label" for="dropdown">Reason for Contact</h5>
        <div class="dropdown-arrow-wrapper">
          <select class="form-control dropdown-arrow" id="dropdown">
            <option value="General Inquiry">General Inquiry</option>
            <option value="Event Planning">Event Planning</option>
            <option value="Feedback">Feedback</option>
            <option value="Other">Other</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <h5 id="date-label" for="date">Preferred Date</h5>
        <input type="text" class="form-control" id="date" placeholder="Select a date" />
      </div>

      <div class="form-group">
        <h5 id="message-form" for="message">Message</h5>
        <textarea class="form-control" id="message" rows="3"></textarea>
      </div>

      <button id="submit-form" class="btn btn-gold" onclick="sendMail()">Submit</button>
    </div>
  </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  flatpickr("#date", {
    dateFormat: "Y-m-d",
    altInput: true,
    altFormat: "F j, Y",
    weekNumbers: true,
    disableMobile: true,
    highlight: [
      {
        highlight: (date) => date.getDay() === 0 || date.getDay() === 6,
        cssClass: "highlight-weekend"
      }
    ],
    onReady: function () {
      const weekendHighlightCSS = document.createElement("style");
      weekendHighlightCSS.innerHTML = ".highlight-weekend { background-color: gold !important; }";
      document.head.appendChild(weekendHighlightCSS);
    }
  });
});

function sendMail() {
  var params = {
    name: document.getElementById("name").value,
    email: document.getElementById("email").value,
    message: document.getElementById("message").value,
    reason: document.getElementById("dropdown").value,
    date: document.getElementById("date").value
  };

  var currentLanguage = document.body.getAttribute('lang'); // Assuming lang attribute is used to store the language (e.g., 'en' or 'es')

  const serviceID = "service_9cbzpys";
  const templateID = "template_krz074s";

  emailjs.send(serviceID, templateID, params)
    .then(res => {
      document.getElementById("name").value = "";
      document.getElementById("email").value = "";
      document.getElementById("message").value = "";
      document.getElementById("dropdown").value = "General Inquiry"; // Reset dropdown to default
      document.getElementById("date").value = ""; // Reset date

      console.log(res);

      if (currentLanguage === "es") {
        alert("¡Su mensaje se envió con éxito!");
      } else {
        alert("Your message was sent successfully!");
      }
    })
    .catch(err => {
      console.log(err);
      alert("There was an error sending your message. Please try again.");
    });
}
</script>
